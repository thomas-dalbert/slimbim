@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix s223: <http://data.ashrae.org/standard223#> .
@prefix qudt: <http://qudt.org/schema/qudt/> .
@prefix qudtqk: <http://qudt.org/vocab/quantitykind/> .
@prefix qudtunit: <http://qudt.org/vocab/unit/> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix onuma: <http://onuma.com/ontology#> .
@prefix : <http://example.org/building/instance#> .
@base <http://example.org/building/instance#> .

# ==============================================================================
# ASHRAE 223P COMPLIANT MODEL - VERSION 2.3 (FIXED ElectricWire)
# ==============================================================================

# This model conforms to ASHRAE Standard 223P for semantic models of building systems
# Version 2.3: Fixed ElectricWire to use official s223:ElectricWire class
# Changes from v2.2:
# - FIXED: Removed custom onuma:ElectricWire class definition (it's officially part of s223!)
# - FIXED: Changed all 13 ElectricWire instances from onuma:ElectricWire â†’ s223:ElectricWire
# - s223:ElectricWire is officially part of ASHRAE 223P standard (subclass of s223:Connection)
# - All electrical wire connections now use official s223:ElectricWire with SHACL validation
# - ElectricWire requires exactly one s223:Medium-Electricity (enforced by standard)
# - Optional s223:hasElectricalPhase property available for phase identification
# - All class names now match official ASHRAE 223P ontology at https://docs.open223.info/

# ==============================================================================
# CUSTOM CLASS DEFINITIONS
# ==============================================================================

# NOTE: s223:ElectricWire is NOT custom - it's part of official ASHRAE 223P standard!
# Definition from official ontology:
#   s223:ElectricWire a s223:Class ;
#     rdfs:subClassOf s223:Connection ;
#     rdfs:comment "An ElectricWire is a subclass of Connection, that represents one or more electrical conductors used to convey electricity."
# See: https://docs.open223.info/ and resources/s223p/models.open223.info/_static/223p.ttl#464-476

onuma:Site a rdfs:Class, sh:NodeShape ;
    rdfs:label "Site" ;
    rdfs:comment "A site containing one or more buildings" ;
    rdfs:subClassOf s223:PhysicalSpace .

onuma:Building a rdfs:Class, sh:NodeShape ;
    rdfs:label "Building" ;
    rdfs:comment "A building structure within a site" ;
    rdfs:subClassOf s223:PhysicalSpace .

# ==============================================================================
# CUSTOM ONUMA ASPECT DEFINITIONS (Extending s223:EnumerationKind-Aspect)
# ==============================================================================

onuma:CircuitNumber a onuma:CircuitNumber,
        s223:Class,
        sh:NodeShape ;
    rdfs:label "Circuit Number" ;
    rdfs:comment "Identifies the electrical circuit number in the panel." ;
    rdfs:subClassOf s223:EnumerationKind-Aspect .

onuma:BuildingType a onuma:BuildingType,
        s223:Class,
        sh:NodeShape ;
    rdfs:label "Building Type" ;
    rdfs:comment "Identifies the type or classification of the building." ;
    rdfs:subClassOf s223:EnumerationKind-Aspect .

onuma:EquipmentType a onuma:EquipmentType,
        s223:Class,
        sh:NodeShape ;
    rdfs:label "Equipment Type" ;
    rdfs:comment "Identifies the specific type or category of equipment." ;
    rdfs:subClassOf s223:EnumerationKind-Aspect .

onuma:Elevation a onuma:Elevation,
        s223:Class,
        sh:NodeShape ;
    rdfs:label "Elevation" ;
    rdfs:comment "Identifies the elevation or floor level of the entity." ;
    rdfs:subClassOf s223:EnumerationKind-Aspect .

# ==============================================================================
# CUSTOM EQUIPMENT SUBCLASS FOR FIRE ALARM NOTIFICATION DEVICES
# ==============================================================================

onuma:FireAlarmNotificationDevice a s223:Class, owl:Class ;
    rdfs:subClassOf s223:Equipment ;
    rdfs:label "Fire Alarm Notification Device" ;
    rdfs:comment "A fire alarm notification appliance (horn, strobe, speaker) that alerts building occupants to fire conditions." .

onuma:AlarmType a s223:Class, owl:Class ;
    rdfs:subClassOf s223:EnumerationKind ;
    rdfs:label "Alarm Type" ;
    rdfs:comment "The type of fire alarm notification device (Horn, Strobe, Speaker, Horn-Strobe)." .

# ==============================================================================
# SPATIAL TOPOLOGY - CORRECTED
# ==============================================================================

# Site
:S177_1588 a onuma:Site ;
    rdfs:label "CDV-RE1-Minimal" ;
    s223:contains :B177_3546 ;
    geo:lat "34.14681314612616"^^xsd:float ;
    geo:long "-118.12822175133219"^^xsd:float .

# Building
:B177_3546 a onuma:Building ;
    rdfs:label "CDV-RE1" ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "Residential"^^xsd:string ;
        s223:hasAspect onuma:BuildingType
    ] ;
    s223:contains :Floor_Level1 ;
    s223:hasSystem :ElectricalSystem_01, :HVACSystem_01, :PlumbingSystem_01, :FireAlarmSystem_01 .

# Floor - CORRECTED TYPE
:Floor_Level1 a s223:PhysicalSpace ;
    rdfs:label "Level 1" ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue 0 ;
        s223:hasAspect onuma:Elevation ;
        qudt:hasUnit qudtunit:MilliM
    ] ;
    s223:contains :Space_RE1, :Space_RE2, :Space_RE3, :Space_RE4, :Space_RE5,
                  :Space_RE6, :Space_RE7, :Space_RE8, :Space_RE9, :Space_RE10, :Space_RE12 .

# Spaces
:Space_RE1 a s223:PhysicalSpace ;
    rdfs:label "Space RE-1" .

:Space_RE2 a s223:PhysicalSpace ;
    rdfs:label "Space RE-2" .

:Space_RE3 a s223:PhysicalSpace ;
    rdfs:label "Dining Extra Small (RE-3)" ;
    dcterms:created "2025-08-13"^^xsd:date ;
    dcterms:modified "2025-09-05"^^xsd:date .

:Space_RE4 a s223:PhysicalSpace ;
    rdfs:label "Entry Small (RE-4)" ;
    dcterms:created "2025-08-13"^^xsd:date .

:Space_RE5 a s223:PhysicalSpace ;
    rdfs:label "Kitchenette Medium (RE-5)" ;
    dcterms:created "2025-08-13"^^xsd:date .

:Space_RE6 a s223:PhysicalSpace ;
    rdfs:label "Laundry Washroom (RE-6)" ;
    dcterms:created "2025-08-13"^^xsd:date ;
    dcterms:modified "2025-09-05"^^xsd:date .

:Space_RE7 a s223:PhysicalSpace ;
    rdfs:label "Living Room Small (RE-7)" ;
    dcterms:created "2025-08-13"^^xsd:date ;
    dcterms:modified "2025-09-05"^^xsd:date .

:Space_RE8 a s223:PhysicalSpace ;
    rdfs:label "Storage Medium (RE-8)" ;
    dcterms:created "2025-08-13"^^xsd:date .

:Space_RE9 a s223:PhysicalSpace ;
    rdfs:label "Space RE-9" .

:Space_RE10 a s223:PhysicalSpace ;
    rdfs:label "Space RE-10" .

:Space_RE12 a s223:PhysicalSpace ;
    rdfs:label "Space RE-12" .

# ==============================================================================
# ELECTRICAL SYSTEM
# ==============================================================================

:ElectricalSystem_01 a s223:System ;
    rdfs:label "Building Electrical System" ;
    s223:hasSubSystem :PowerDistributionSystem_01, :LightingControlSystem_01 .

# Power Distribution System
:PowerDistributionSystem_01 a s223:System ;
    rdfs:label "Power Distribution System" ;
    s223:hasMember :PANEL_01, :JBOX_01, :JBOX_02 .

# Electrical Panel - V8: RENAMED to ElectricityBreaker + ADDED Equipment superclass
:PANEL_01 a s223:ElectricityBreaker, s223:Equipment ;
    rdfs:label "PP 120/208V 200A MCB" ;
    s223:hasPhysicalLocation :Space_RE8 ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "PP 120/208V 200A MCB" ;
        s223:hasAspect onuma:EquipmentType
    ] ;
    s223:hasProperty [
        a s223:QuantifiableProperty ;
        s223:hasValue 208 ;
        qudt:hasQuantityKind qudtqk:Voltage ;
        qudt:hasUnit qudtunit:V
    ] ;
    s223:hasProperty [
        a s223:QuantifiableProperty ;
        s223:hasValue 200 ;
        qudt:hasQuantityKind qudtqk:ElectricCurrent ;
        qudt:hasUnit qudtunit:A
    ] ;
    s223:hasConnectionPoint :PANEL_01_CP1, :PANEL_01_CP2, :PANEL_01_CP3, :PANEL_01_CP5,
                           :PANEL_01_CP7_9, :PANEL_01_CP8, :PANEL_01_CP11_13, :PANEL_01_CP12,
                           :PANEL_01_CP15_17, :PANEL_01_CP19_21 .

# Panel Connection Points - CORRECTED TYPES
:PANEL_01_CP1 a s223:OutletConnectionPoint ;
    rdfs:label "Panel Circuit 1" ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :PANEL_01 ;
    s223:cnx :LIGHT_01_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "1" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:PANEL_01_CP2 a s223:OutletConnectionPoint ;
    rdfs:label "Panel Circuit 2" ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :PANEL_01 ;
    s223:cnx :LIGHT_FL01_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "2" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:PANEL_01_CP3 a s223:OutletConnectionPoint ;
    rdfs:label "Panel Circuit 3" ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :PANEL_01 ;
    s223:cnx :JBOX_02_InCP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "3" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:PANEL_01_CP5 a s223:OutletConnectionPoint ;
    rdfs:label "Panel Circuit 5" ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :PANEL_01 ;
    s223:cnx :RECEPT_01_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "5" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:PANEL_01_CP7_9 a s223:OutletConnectionPoint ;
    rdfs:label "Panel Circuits 7,9" ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz ;
    s223:isConnectionPointOf :PANEL_01 ;
    s223:cnx :RECEPT_08_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "7,9" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:PANEL_01_CP8 a s223:OutletConnectionPoint ;
    rdfs:label "Panel Circuit 8" ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :PANEL_01 ;
    s223:cnx :RECEPT_02_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "8" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:PANEL_01_CP11_13 a s223:OutletConnectionPoint ;
    rdfs:label "Panel Circuits 11,13" ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz ;
    s223:isConnectionPointOf :PANEL_01 ;
    s223:cnx :JBOX_01_InCP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "11,13" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:PANEL_01_CP12 a s223:OutletConnectionPoint ;
    rdfs:label "Panel Circuit 12" ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :PANEL_01 ;
    s223:cnx :RECEPT_07_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "12" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:PANEL_01_CP15_17 a s223:OutletConnectionPoint ;
    rdfs:label "Panel Circuits 15,17" ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz ;
    s223:isConnectionPointOf :PANEL_01 ;
    s223:cnx :RECEPT_09_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "15,17" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:PANEL_01_CP19_21 a s223:OutletConnectionPoint ;
    rdfs:label "Panel Circuits 19,21" ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz ;
    s223:isConnectionPointOf :PANEL_01 ;
    s223:cnx :RECEPT_10_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "19,21" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

# Lighting Control System
:LightingControlSystem_01 a s223:System ;
    rdfs:label "Lighting Control System" ;
    s223:hasMember :LIGHT_01, :LIGHT_02, :LIGHT_03, :LIGHT_04, :LIGHT_05,
                   :LIGHT_FL01, :LIGHT_FL02, :LIGHT_FAN_01, :LIGHT_FAN_02 .

# Junction Boxes with proper connection points (NOTE: Junction is NOT Equipment!)
:JBOX_01 a s223:Junction ;
    rdfs:label "Junction Box at 2400 AFF" ;
    s223:hasPhysicalLocation :Space_RE5 ;
    s223:hasConnectionPoint :JBOX_01_InCP, :JBOX_01_OutCP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "11,13" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

# ADDED: Junction box connection point definitions
:JBOX_01_InCP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz ;
    s223:isConnectionPointOf :JBOX_01 ;
    s223:cnx :PANEL_01_CP11_13 .

:JBOX_01_OutCP a s223:OutletConnectionPoint ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz ;
    s223:isConnectionPointOf :JBOX_01 ;
    s223:cnx :WTRHTR_01_ElecCP .

:JBOX_02 a s223:Junction ;
    rdfs:label "Junction Box at 2400 AFF" ;
    s223:hasPhysicalLocation :Space_RE6 ;
    s223:hasConnectionPoint :JBOX_02_InCP, :JBOX_02_OutCP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "3,5" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:JBOX_02_InCP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :JBOX_02 ;
    s223:cnx :PANEL_01_CP3 .

:JBOX_02_OutCP a s223:OutletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :JBOX_02 ;
    s223:cnx :ICSAHU_01_ElecCP .

# Receptacles (Electrical Outlets) - V8: RENAMED to ElectricityOutlet + ADDED Equipment superclass
:RECEPT_01 a s223:ElectricityOutlet, s223:Equipment ;
    rdfs:label "Receptacle 3-wire Duplex" ;
    s223:hasPhysicalLocation :Space_RE8 ;
    s223:hasConnectionPoint :RECEPT_01_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "5" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:RECEPT_01_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :RECEPT_01 ;
    s223:cnx :PANEL_01_CP5 .

:RECEPT_02 a s223:ElectricityOutlet, s223:Equipment ;
    rdfs:label "120V Duplex Receptacle" ;
    s223:hasPhysicalLocation :Space_RE7 ;
    s223:hasConnectionPoint :RECEPT_02_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "8" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:RECEPT_02_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :RECEPT_02 ;
    s223:cnx :PANEL_01_CP8 .

:RECEPT_03 a s223:ElectricityOutlet, s223:Equipment ;
    rdfs:label "120V Duplex Receptacle" ;
    s223:hasPhysicalLocation :Space_RE7 ;
    s223:hasConnectionPoint :RECEPT_03_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "8" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:RECEPT_03_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :RECEPT_03 .
    # Note: This receptacle appears to be on same circuit but not directly connected to panel

:RECEPT_04 a s223:ElectricityOutlet, s223:Equipment ;
    rdfs:label "120V Duplex Receptacle" ;
    s223:hasPhysicalLocation :Space_RE3 ;
    s223:hasConnectionPoint :RECEPT_04_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "8" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:RECEPT_04_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :RECEPT_04 .
    # Note: This receptacle appears to be on same circuit but not directly connected to panel

:RECEPT_05 a s223:ElectricityOutlet, s223:Equipment ;
    rdfs:label "120V Duplex Receptacle" ;
    s223:hasPhysicalLocation :Space_RE3 ;
    s223:hasConnectionPoint :RECEPT_05_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "8" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:RECEPT_05_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :RECEPT_05 .
    # Note: This receptacle appears to be on same circuit but not directly connected to panel

:RECEPT_06 a s223:ElectricityOutlet, s223:Equipment ;
    rdfs:label "120V Duplex Receptacle" ;
    s223:hasPhysicalLocation :Space_RE4 ;
    s223:hasConnectionPoint :RECEPT_06_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "8" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:RECEPT_06_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :RECEPT_06 .
    # Note: This receptacle appears to be on same circuit but not directly connected to panel

:RECEPT_07 a s223:ElectricityOutlet, s223:Equipment ;
    rdfs:label "120V Duplex Receptacle" ;
    s223:hasPhysicalLocation :Space_RE5 ;
    s223:hasConnectionPoint :RECEPT_07_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "12" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:RECEPT_07_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :RECEPT_07 ;
    s223:cnx :PANEL_01_CP12 .

:RECEPT_08 a s223:ElectricityOutlet, s223:Equipment ;
    rdfs:label "240V Single Receptacle" ;
    s223:hasPhysicalLocation :Space_RE5 ;
    s223:hasConnectionPoint :RECEPT_08_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "7,9" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:RECEPT_08_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz ;
    s223:isConnectionPointOf :RECEPT_08 ;
    s223:cnx :PANEL_01_CP7_9 .

:RECEPT_09 a s223:ElectricityOutlet, s223:Equipment ;
    rdfs:label "240V Duplex Receptacle" ;
    s223:hasPhysicalLocation :Space_RE6 ;
    s223:hasConnectionPoint :RECEPT_09_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "15,17" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:RECEPT_09_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz ;
    s223:isConnectionPointOf :RECEPT_09 ;
    s223:cnx :PANEL_01_CP15_17 .

:RECEPT_10 a s223:ElectricityOutlet, s223:Equipment ;
    rdfs:label "240V Duplex Receptacle" ;
    s223:hasPhysicalLocation :Space_RE6 ;
    s223:hasConnectionPoint :RECEPT_10_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "19,21" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:RECEPT_10_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz ;
    s223:isConnectionPointOf :RECEPT_10 ;
    s223:cnx :PANEL_01_CP19_21 .

# Lighting Fixtures - V8: ADDED Equipment superclass
:LIGHT_01 a s223:Luminaire, s223:Equipment ;
    rdfs:label "120V Recessed 6\" Downlight" ;
    s223:hasPhysicalLocation :Space_RE3 ;
    s223:hasConnectionPoint :LIGHT_01_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "1" ;
        s223:hasAspect onuma:CircuitNumber
    ] ;
    s223:hasProperty [
        a s223:QuantifiableProperty ;
        s223:hasValue 120 ;
        qudt:hasQuantityKind qudtqk:Voltage ;
        qudt:hasUnit qudtunit:V
    ] ;
    s223:hasProperty [
        a s223:QuantifiableProperty ;
        s223:hasValue 9 ;
        qudt:hasQuantityKind qudtqk:Power ;
        qudt:hasUnit qudtunit:W
    ] .

:LIGHT_01_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :LIGHT_01 ;
    s223:cnx :PANEL_01_CP1 .

:LIGHT_02 a s223:Luminaire, s223:Equipment ;
    rdfs:label "120V Recessed 6\" Downlight" ;
    s223:hasPhysicalLocation :Space_RE3 ;
    s223:hasConnectionPoint :LIGHT_02_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "1" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:LIGHT_02_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :LIGHT_02 .

:LIGHT_03 a s223:Luminaire, s223:Equipment ;
    rdfs:label "120V Recessed 6\" Downlight" ;
    s223:hasPhysicalLocation :Space_RE3 ;
    s223:hasConnectionPoint :LIGHT_03_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "1" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:LIGHT_03_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :LIGHT_03 .

:LIGHT_04 a s223:Luminaire, s223:Equipment ;
    rdfs:label "120V Recessed 6\" Downlight" ;
    s223:hasPhysicalLocation :Space_RE3 ;
    s223:hasConnectionPoint :LIGHT_04_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "1" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:LIGHT_04_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :LIGHT_04 .

:LIGHT_05 a s223:Luminaire, s223:Equipment ;
    rdfs:label "120V Recessed 6\" Downlight" ;
    s223:hasPhysicalLocation :Space_RE4 ;
    s223:hasConnectionPoint :LIGHT_05_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "1" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:LIGHT_05_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :LIGHT_05 .

:LIGHT_FL01 a s223:Luminaire, s223:Equipment ;
    rdfs:label "120V 2 Lamp Flush 16\"" ;
    s223:hasPhysicalLocation :Space_RE7 ;
    s223:hasConnectionPoint :LIGHT_FL01_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "2" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:LIGHT_FL01_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :LIGHT_FL01 ;
    s223:cnx :PANEL_01_CP2 .

:LIGHT_FL02 a s223:Luminaire, s223:Equipment ;
    rdfs:label "120V 2 Lamp Flush 16\"" ;
    s223:hasPhysicalLocation :Space_RE7 ;
    s223:hasConnectionPoint :LIGHT_FL02_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "2" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:LIGHT_FL02_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :LIGHT_FL02 .

:LIGHT_FAN_01 a s223:Fan, s223:Equipment ;
    rdfs:label "Exhaust Fan / Light - 50 CFM" ;
    s223:hasPhysicalLocation :Space_RE7 ;
    s223:hasConnectionPoint :LIGHT_FAN_01_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "2" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:LIGHT_FAN_01_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :LIGHT_FAN_01 .

:LIGHT_FAN_02 a s223:Fan, s223:Equipment ;
    rdfs:label "Exhaust Fan / Light - 50 CFM" ;
    s223:hasPhysicalLocation :Space_RE3 ;
    s223:hasConnectionPoint :LIGHT_FAN_02_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "1" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:LIGHT_FAN_02_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :LIGHT_FAN_02 .

# ==============================================================================
# HVAC SYSTEM - FULLY CORRECTED WITH S223P COMPLIANT MEDIUMS
# ==============================================================================

:HVACSystem_01 a s223:System ;
    rdfs:label "HVAC System" ;
    s223:hasSubSystem :SupplyAirSystem_01, :ReturnAirSystem_01 .

# Supply Air System - REMOVED system connection point
:SupplyAirSystem_01 a s223:System ;
    rdfs:label "Supply Air System" ;
    s223:hasMember :ICSAHU_01, :AIRTRM_SD01, :AIRTRM_SD02 .
    # REMOVED: s223:hasConnectionPoint - systems shouldn't have direct connection points

# Return Air System - REMOVED system connection point
:ReturnAirSystem_01 a s223:System ;
    rdfs:label "Return Air System" ;
    s223:hasMember :ICSAHU_01, :AIRTRM_RT01 .
    # REMOVED: s223:hasConnectionPoint

# Air Handling Unit - V8: ADDED Equipment superclass
:ICSAHU_01 a s223:AirHandlingUnit, s223:Equipment ;
    rdfs:label "7kW Air Handling Unit" ;
    s223:hasPhysicalLocation :Space_RE6 ;
    s223:hasConnectionPoint :ICSAHU_01_ElecCP, :ICSAHU_01_SAOutCP, :ICSAHU_01_RAInCP ;
    s223:hasProperty [
        a s223:QuantifiableProperty ;
        s223:hasValue 7000 ;
        qudt:hasQuantityKind qudtqk:Power ;
        qudt:hasUnit qudtunit:W
    ] ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "3,5" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:ICSAHU_01_ElecCP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :ICSAHU_01 ;
    s223:cnx :JBOX_02_OutCP .

:ICSAHU_01_SAOutCP a s223:OutletConnectionPoint ;
    s223:hasMedium s223:Fluid-Air ;
    s223:isConnectionPointOf :ICSAHU_01 ;
    s223:cnx :SD01_InCP, :SD02_InCP .

:ICSAHU_01_RAInCP a s223:InletConnectionPoint ;
    s223:hasMedium s223:Fluid-Air ;
    s223:isConnectionPointOf :ICSAHU_01 ;
    s223:cnx :RT01_OutCP .

# Supply Air Diffusers - V8: ADDED Equipment superclass
:AIRTRM_SD01 a s223:Terminal, s223:Equipment ;
    rdfs:label "Supply Air Diffuser" ;
    s223:hasPhysicalLocation :Space_RE7 ;
    s223:hasConnectionPoint :SD01_InCP, :SD01_OutCP ;
    s223:hasProperty [
        a s223:QuantifiableProperty ;
        s223:hasValue 70 ;
        qudt:hasQuantityKind qudtqk:VolumeFlowRate ;
        qudt:hasUnit qudtunit:L-PER-SEC
    ] .

:SD01_InCP a s223:InletConnectionPoint ;
    s223:hasMedium s223:Fluid-Air ;
    s223:isConnectionPointOf :AIRTRM_SD01 ;
    s223:cnx :ICSAHU_01_SAOutCP .

:SD01_OutCP a s223:OutletConnectionPoint ;
    s223:hasMedium s223:Fluid-Air ;
    s223:isConnectionPointOf :AIRTRM_SD01 .

:AIRTRM_SD02 a s223:Terminal, s223:Equipment ;
    rdfs:label "Supply Air Diffuser" ;
    s223:hasPhysicalLocation :Space_RE3 ;
    s223:hasConnectionPoint :SD02_InCP, :SD02_OutCP ;
    s223:hasProperty [
        a s223:QuantifiableProperty ;
        s223:hasValue 70 ;
        qudt:hasQuantityKind qudtqk:VolumeFlowRate ;
        qudt:hasUnit qudtunit:L-PER-SEC
    ] .

:SD02_InCP a s223:InletConnectionPoint ;
    s223:hasMedium s223:Fluid-Air ;
    s223:isConnectionPointOf :AIRTRM_SD02 ;
    s223:cnx :ICSAHU_01_SAOutCP .

:SD02_OutCP a s223:OutletConnectionPoint ;
    s223:hasMedium s223:Fluid-Air ;
    s223:isConnectionPointOf :AIRTRM_SD02 .

# Return Air Grille - V8: ADDED Equipment superclass
:AIRTRM_RT01 a s223:Terminal, s223:Equipment ;
    rdfs:label "Return Air Grille" ;
    s223:hasPhysicalLocation :Space_RE4 ;
    s223:hasConnectionPoint :RT01_InCP, :RT01_OutCP ;
    s223:hasProperty [
        a s223:QuantifiableProperty ;
        s223:hasValue 420 ;
        qudt:hasQuantityKind qudtqk:VolumeFlowRate ;
        qudt:hasUnit qudtunit:L-PER-SEC
    ] .

:RT01_InCP a s223:InletConnectionPoint ;
    s223:hasMedium s223:Fluid-Air ;
    s223:isConnectionPointOf :AIRTRM_RT01 .

:RT01_OutCP a s223:OutletConnectionPoint ;
    s223:hasMedium s223:Fluid-Air ;
    s223:isConnectionPointOf :AIRTRM_RT01 ;
    s223:cnx :ICSAHU_01_RAInCP .

# ==============================================================================
# PLUMBING SYSTEM - FULLY CORRECTED WITH S223P COMPLIANT MEDIUMS
# ==============================================================================

:PlumbingSystem_01 a s223:System ;
    rdfs:label "Plumbing System" ;
    s223:hasSubSystem :DomesticColdWaterSystem_01, :DomesticHotWaterSystem_01,
                      :Sanitary_1, :Sanitary_2, :Sanitary_3, :Sanitary_4, :Sanitary_5, :Sanitary_6 .

# Cold Water System - REMOVED system connection point
:DomesticColdWaterSystem_01 a s223:System ;
    rdfs:label "CW 1" ;
    s223:hasMember :WTRHTR_01, :CW_Supply_Point .
    # REMOVED: s223:hasConnectionPoint

# ADDED: Cold water supply point as equipment
:CW_Supply_Point a s223:Equipment ;
    rdfs:label "Cold Water Supply Point" ;
    s223:hasConnectionPoint :CW_System_CP .

:CW_System_CP a s223:OutletConnectionPoint ;
    s223:hasMedium s223:Fluid-Water ;
    s223:isConnectionPointOf :CW_Supply_Point ;
    s223:cnx :WTRHTR_01_CWInCP .

# Hot Water System - REMOVED system connection point
:DomesticHotWaterSystem_01 a s223:System ;
    rdfs:label "HW 1" ;
    s223:hasMember :WTRHTR_01, :HW_Distribution_Point .
    # REMOVED: s223:hasConnectionPoint

# ADDED: Hot water distribution point as equipment
:HW_Distribution_Point a s223:Equipment ;
    rdfs:label "Hot Water Distribution Point" ;
    s223:hasConnectionPoint :HW_System_CP .

:HW_System_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:Water-HotWater ;
    s223:isConnectionPointOf :HW_Distribution_Point ;
    s223:cnx :WTRHTR_01_HWOutCP .

# Sanitary Systems
:Sanitary_1 a s223:System ;
    rdfs:label "SAN 1" .

:Sanitary_2 a s223:System ;
    rdfs:label "SAN 2" .

:Sanitary_3 a s223:System ;
    rdfs:label "SAN 3" .

:Sanitary_4 a s223:System ;
    rdfs:label "SAN 4" .

:Sanitary_5 a s223:System ;
    rdfs:label "SAN 5" .

:Sanitary_6 a s223:System ;
    rdfs:label "SAN 6" .

# Water Heater - V8: RENAMED to Boiler + ADDED Equipment superclass + UPDATED label
:WTRHTR_01 a s223:Boiler, s223:Equipment ;
    rdfs:label "Domestic Hot Water Heater" ;
    s223:hasPhysicalLocation :Space_RE5 ;
    s223:hasConnectionPoint :WTRHTR_01_ElecCP, :WTRHTR_01_CWInCP, :WTRHTR_01_HWOutCP ;
    rdfs:comment "28kW tankless electric water heater providing domestic hot water supply" ;
    s223:hasProperty [
        a s223:QuantifiableProperty ;
        s223:hasValue 28000 ;
        qudt:hasQuantityKind qudtqk:Power ;
        qudt:hasUnit qudtunit:W
    ] ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "11,13" ;
        s223:hasAspect onuma:CircuitNumber
    ] .

:WTRHTR_01_ElecCP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz ;
    s223:isConnectionPointOf :WTRHTR_01 ;
    s223:cnx :JBOX_01_OutCP .

:WTRHTR_01_CWInCP a s223:InletConnectionPoint ;
    s223:hasMedium s223:Fluid-Water ;
    s223:isConnectionPointOf :WTRHTR_01 ;
    s223:cnx :CW_System_CP .

:WTRHTR_01_HWOutCP a s223:OutletConnectionPoint ;
    s223:hasMedium s223:Water-HotWater ;
    s223:isConnectionPointOf :WTRHTR_01 ;
    s223:cnx :HW_System_CP .

# ==============================================================================
# FIRE ALARM SYSTEM
# ==============================================================================

:FireAlarmSystem_01 a s223:System ;
    rdfs:label "Fire Alarm System" ;
    s223:hasMember :SYM_Fire01, :SYM_Fire02, :SYM_Fire03, :SYM_Fire04 .

# Carbon Monoxide Detector - V8: ADDED Equipment superclass
:SYM_Fire01 a s223:Sensor, s223:Equipment ;
    rdfs:label "Carbon Monoxide Detector Ceiling" ;
    s223:hasPhysicalLocation :Space_RE3 ;
    s223:hasConnectionPoint :Fire01_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "CO Detector" ;
        s223:hasAspect onuma:EquipmentType
    ] .

:Fire01_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :SYM_Fire01 .

# Smoke Detector - V8: ADDED Equipment superclass
:SYM_Fire02 a s223:Sensor, s223:Equipment ;
    rdfs:label "Smoke Detector" ;
    s223:hasPhysicalLocation :Space_RE3 ;
    s223:hasConnectionPoint :Fire02_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "Smoke Detector" ;
        s223:hasAspect onuma:EquipmentType
    ] .

:Fire02_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :SYM_Fire02 .

# Fire Alarm Horn - V8: RENAMED to FireAlarmNotificationDevice + ADDED Equipment superclass
:SYM_Fire03 a onuma:FireAlarmNotificationDevice, s223:Equipment ;
    rdfs:label "Horn Ceiling" ;
    s223:hasPhysicalLocation :Space_RE4 ;
    s223:hasConnectionPoint :Fire03_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "Fire Alarm Horn" ;
        s223:hasAspect onuma:EquipmentType
    ] .

:Fire03_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :SYM_Fire03 .

# Fire Alarm Strobe - V8: RENAMED to FireAlarmNotificationDevice + ADDED Equipment superclass
:SYM_Fire04 a onuma:FireAlarmNotificationDevice, s223:Equipment ;
    rdfs:label "Strobe Ceiling" ;
    s223:hasPhysicalLocation :Space_RE4 ;
    s223:hasConnectionPoint :Fire04_CP ;
    s223:hasProperty [
        a s223:Property ;
        s223:hasValue "Fire Alarm Strobe" ;
        s223:hasAspect onuma:EquipmentType
    ] .

:Fire04_CP a s223:InletConnectionPoint ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz ;
    s223:isConnectionPointOf :SYM_Fire04 .

# ==============================================================================
# CONNECTIONS (WIRING AND PIPING) - WITH CORRECTED MEDIUMS AND PATTERNS
# ==============================================================================

# Electrical Connections

# Panel to Junction Boxes
:ElecWire_Panel_JB01 a s223:ElectricWire ;
    s223:cnx :PANEL_01_CP11_13, :JBOX_01_InCP ;
    s223:connectsFrom :PANEL_01 ;
    s223:connectsTo :JBOX_01 ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz .

:ElecWire_Panel_JB02 a s223:ElectricWire ;
    s223:cnx :PANEL_01_CP3, :JBOX_02_InCP ;
    s223:connectsFrom :PANEL_01 ;
    s223:connectsTo :JBOX_02 ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz .

# Junction Box to Equipment
:ElecWire_JB01_WH a s223:ElectricWire ;
    s223:cnx :JBOX_01_OutCP, :WTRHTR_01_ElecCP ;
    s223:connectsFrom :JBOX_01 ;
    s223:connectsTo :WTRHTR_01 ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz .

:ElecWire_JB02_AHU a s223:ElectricWire ;
    s223:cnx :JBOX_02_OutCP, :ICSAHU_01_ElecCP ;
    s223:connectsFrom :JBOX_02 ;
    s223:connectsTo :ICSAHU_01 ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz .

# Panel to Receptacles
:ElecWire_Panel_Recept01 a s223:ElectricWire ;
    s223:cnx :PANEL_01_CP5, :RECEPT_01_CP ;
    s223:connectsFrom :PANEL_01 ;
    s223:connectsTo :RECEPT_01 ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz .

:ElecWire_Panel_Recept02 a s223:ElectricWire ;
    s223:cnx :PANEL_01_CP8, :RECEPT_02_CP ;
    s223:connectsFrom :PANEL_01 ;
    s223:connectsTo :RECEPT_02 ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz .

:ElecWire_Panel_Recept07 a s223:ElectricWire ;
    s223:cnx :PANEL_01_CP12, :RECEPT_07_CP ;
    s223:connectsFrom :PANEL_01 ;
    s223:connectsTo :RECEPT_07 ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz .

:ElecWire_Panel_Recept08 a s223:ElectricWire ;
    s223:cnx :PANEL_01_CP7_9, :RECEPT_08_CP ;
    s223:connectsFrom :PANEL_01 ;
    s223:connectsTo :RECEPT_08 ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz .

:ElecWire_Panel_Recept09 a s223:ElectricWire ;
    s223:cnx :PANEL_01_CP15_17, :RECEPT_09_CP ;
    s223:connectsFrom :PANEL_01 ;
    s223:connectsTo :RECEPT_09 ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz .

:ElecWire_Panel_Recept10 a s223:ElectricWire ;
    s223:cnx :PANEL_01_CP19_21, :RECEPT_10_CP ;
    s223:connectsFrom :PANEL_01 ;
    s223:connectsTo :RECEPT_10 ;
    s223:hasMedium s223:AC-208VLL-3Ph-60Hz .

# Panel to Lights (Circuit 1)
:ElecWire_Panel_Light01 a s223:ElectricWire ;
    s223:cnx :PANEL_01_CP1, :LIGHT_01_CP ;
    s223:connectsFrom :PANEL_01 ;
    s223:connectsTo :LIGHT_01 ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz .

# Panel to Lights (Circuit 2)
:ElecWire_Panel_LightFL01 a s223:ElectricWire ;
    s223:cnx :PANEL_01_CP2, :LIGHT_FL01_CP ;
    s223:connectsFrom :PANEL_01 ;
    s223:connectsTo :LIGHT_FL01 ;
    s223:hasMedium s223:AC-120VLN-1Ph-60Hz .

# HVAC Air Flow Connections

# AHU to Supply Diffusers
:Duct_AHU_SD01 a s223:Duct ;
    s223:cnx :ICSAHU_01_SAOutCP, :SD01_InCP ;
    s223:connectsFrom :ICSAHU_01 ;
    s223:connectsTo :AIRTRM_SD01 ;
    s223:hasMedium s223:Fluid-Air .

:Duct_AHU_SD02 a s223:Duct ;
    s223:cnx :ICSAHU_01_SAOutCP, :SD02_InCP ;
    s223:connectsFrom :ICSAHU_01 ;
    s223:connectsTo :AIRTRM_SD02 ;
    s223:hasMedium s223:Fluid-Air .

# Return Grille to AHU
:Duct_RT01_AHU a s223:Duct ;
    s223:cnx :RT01_OutCP, :ICSAHU_01_RAInCP ;
    s223:connectsFrom :AIRTRM_RT01 ;
    s223:connectsTo :ICSAHU_01 ;
    s223:hasMedium s223:Fluid-Air .

# Plumbing Connections

# Cold Water to Water Heater
:Pipe_CW_WH a s223:Pipe ;
    s223:cnx :CW_System_CP, :WTRHTR_01_CWInCP ;
    s223:connectsFrom :CW_Supply_Point ;
    s223:connectsTo :WTRHTR_01 ;
    s223:hasMedium s223:Fluid-Water .

# Hot Water from Water Heater
:Pipe_WH_HW a s223:Pipe ;
    s223:cnx :WTRHTR_01_HWOutCP, :HW_System_CP ;
    s223:connectsFrom :WTRHTR_01 ;
    s223:connectsTo :HW_Distribution_Point ;
    s223:hasMedium s223:Water-HotWater .

# ==============================================================================
# DOCUMENTATION AND METADATA
# ==============================================================================

:B177_3546 dcterms:created "2023-01-15"^^xsd:date ;
    dcterms:creator "BIM to ASHRAE 223p Converter" ;
    dcterms:description "ASHRAE 223p compliant model of CDV-RE1 residential building systems including electrical, HVAC, plumbing, sanitary, and fire alarm systems. Version 9 fixed ElectricWire to use official s223:ElectricWire class instead of custom onuma:ElectricWire." ;
    dcterms:title "CDV-RE1 Building Systems Model - ASHRAE 223p Compliant - Version 9" .

# Model Validation Statement
[] a owl:Ontology ;
    rdfs:comment "This model conforms to ASHRAE Standard 223P for semantic interoperability of building systems. Version 2.3 with corrected ElectricWire class - now uses official s223:ElectricWire from ASHRAE 223P standard instead of custom onuma:ElectricWire. All 13 electrical wire connection instances updated. All equipment classes match official ASHRAE 223P ontology and include explicit s223:Equipment superclass." ;
    owl:imports <http://data.ashrae.org/standard223/1.0/model/all> .
